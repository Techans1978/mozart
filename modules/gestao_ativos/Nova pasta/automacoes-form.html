<!doctype html>
<html lang="pt-BR">
<head>
  <title>Automação & Regras — Cadastro</title>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="includes/css/style_gestao_ativos.css?v=1.0.0">

</head>
<body class="bpm">
  <div class="container">
    
<header class="toolbar">
  <h1>Automação & Regras — Cadastro</h1>
  <div class="actions"><a class="btn" href="automacoes-listar.html">Listar regras</a></div>
</header>

<form class="card" onsubmit="return false">
  <p class="subtitle">Definição</p>
  <div class="grid cols-4">
    <div><label>Nome da regra</label><input type="text" placeholder="Descreva o objetivo"/></div>
    <div><label>Status</label><select><option>Ativa</option><option>Inativa</option></select></div>
    <div><label>Tipo</label><select><option>Evento</option><option>Condicional</option><option>Escalonamento</option><option>Notificação</option><option>Integração</option></select></div>
    <div><label>Escopo</label><select><option>Global</option><option>Entidade</option><option>Local</option></select></div>
  </div>
  <div class="divider"></div>
  <p class="subtitle">Condições</p>
  <div id="conds" class="stack"></div>
  <button type="button" class="btn small" id="add-cond">+ Adicionar condição</button>
  <div class="divider"></div>
  <p class="subtitle">Ações</p>
  <div id="acts" class="stack"></div>
  <button type="button" class="btn small" id="add-act">+ Adicionar ação</button>
  <div class="divider"></div>
  <div class="row" style="justify-content:flex-end;gap:10px">
    <button class="btn">Salvar rascunho</button>
    <button class="btn primary">Publicar</button>
  </div>
</form>
<script>
function condRow(){
  const el=document.createElement('div'); el.className='grid cols-4'; el.style.alignItems='end';
  el.innerHTML=`
    <div><label>Campo</label><input type="text" placeholder="ex.: OS.status"/></div>
    <div><label>Operador</label><select><option>=</option><option>!=</option><option>&gt;</option><option>&lt;</option></select></div>
    <div><label>Valor</label><input type="text" placeholder="Aguardando peça"/></div>
    <div class="row"><button type="button" class="btn small danger">Remover</button></div>`;
  el.querySelector('.btn.danger').addEventListener('click',()=>el.remove()); return el;
}
function actRow(){
  const el=document.createElement('div'); el.className='grid cols-4'; el.style.alignItems='end';
  el.innerHTML=`
    <div><label>Ação</label><select><option>Enviar e-mail</option><option>Mover para fila</option><option>Mudar status</option><option>Abrir OS</option><option>Criar OC</option><option>Webhook</option></select></div>
    <div><label>Parâmetros</label><input type="text" placeholder="destinatário/URL/campos"/></div>
    <div><label>Assunto/Label</label><input type="text" placeholder="opcional"/></div>
    <div class="row"><button type="button" class="btn small danger">Remover</button></div>`;
  el.querySelector('.btn.danger').addEventListener('click',()=>el.remove()); return el;
}
const cwrap=document.getElementById('conds'), awrap=document.getElementById('acts');
document.getElementById('add-cond').addEventListener('click',()=>cwrap.appendChild(condRow()));
document.getElementById('add-act').addEventListener('click',()=>awrap.appendChild(actRow()));
cwrap.appendChild(condRow()); awrap.appendChild(actRow());
</script>

  </div>
  
</body>
</html>