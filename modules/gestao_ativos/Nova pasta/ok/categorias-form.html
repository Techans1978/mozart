<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Categorias ‚Ä¢ Cadastro</title>
  <link rel="stylesheet" href="includes/css/style_gestao_ativos.css?v=1.0.0">
</head>
<body class="bpm">
  <div class="container">
    <header class="toolbar">
      <h1>Categorias ‚Äî Cadastro</h1>
      <div class="actions">
        <a class="btn" href="categorias-listar.html">Listar categorias</a>
      </div>
    </header>

    <form class="card" autocomplete="off" novalidate>
      <p class="subtitle">Identifica√ß√£o</p>
      <div class="grid cols-2">
        <div>
          <label>Nome da categoria *</label>
          <input type="text" placeholder="Ex.: Notebook, Impressora t√©rmica, Balan√ßa checkout" />
          <div class="error-text hidden">Informe o nome.</div>
        </div>
        <div>
          <label>C√≥digo interno</label>
          <input type="text" placeholder="Para integra√ß√£o/ERP (opcional)" />
        </div>
      </div>

      <div class="grid cols-2">
        <div>
          <label>Natureza *</label>
          <div class="toggle" role="tablist" aria-label="Natureza da categoria">
            <input type="radio" id="nat-ativo" name="natureza" checked>
            <label for="nat-ativo">Ativo</label>
            <input type="radio" id="nat-consumivel" name="natureza">
            <label for="nat-consumivel">Consum√≠vel</label>
            <input type="radio" id="nat-peca" name="natureza">
            <label for="nat-peca">Pe√ßa</label>
            <input type="radio" id="nat-kit" name="natureza">
            <label for="nat-kit">Kit</label>
          </div>
        </div>
        <div>
          <label>Status *</label>
          <select>
            <option value="ATIVA">Ativa</option>
            <option value="INATIVA">Inativa</option>
          </select>
        </div>
      </div>

      <div class="grid cols-2">
        <div>
          <label>Categoria pai (opcional)</label>
          <select>
            <option value="">‚Äî sem pai ‚Äî</option>
            <option>Inform√°tica</option>
            <option>Perif√©ricos</option>
            <option>Balancas</option>
          </select>
          <span class="hint">Permite √°rvore/hierarquia de categorias.</span>
        </div>
        <div>
          <label>Entidade/Empresa (se aplic√°vel)</label>
          <select>
            <option value="">‚Äî</option>
            <option>Matriz</option>
            <option>Filial 01</option>
          </select>
        </div>
      </div>

      <div class="grid cols-2">
        <div>
          <label>Setores permitidos (opcional)</label>
          <select multiple>
            <option>TI</option>
            <option>Loja</option>
            <option>Dep√≥sito</option>
            <option>Administrativo</option>
          </select>
          <span class="hint">Segure Ctrl/Cmd para selecionar v√°rios.</span>
        </div>
        <div class="grid cols-2">
          <div>
            <label>√çcone/emoji (opcional)</label>
            <input type="text" placeholder="Ex.: üñ®Ô∏è" />
          </div>
          <div>
            <label>Cor</label>
            <input type="color" value="#3b82f6" />
          </div>
        </div>
      </div>

      <div class="grid">
        <div>
          <label>Descri√ß√£o</label>
          <textarea placeholder="Use para orientar o cadastro e padronizar itens desta categoria."></textarea>
        </div>
      </div>

      <div class="divider"></div>

      <p class="subtitle">Regras por natureza</p>
      <div class="grid cols-2">
        <div class="card-muted">
          <label><input type="checkbox" /> Exigir manuten√ß√£o preventiva por padr√£o</label><br>
          <label><input type="checkbox" /> Exigir termo de responsabilidade em empr√©stimos</label><br>
          <label><input type="checkbox" /> Habilitar reservas para itens desta categoria</label>
        </div>
        <div class="card-muted">
          <label><input id="chk-serial" type="checkbox" /> Rastrear por n√∫mero de s√©rie</label><br>
          <span class="hint">Para Consum√≠vel/Pe√ßa, ative se cada unidade tiver s√©rie.</span>
        </div>
      </div>

      <div class="divider"></div>

      <p class="subtitle">Template de atributos (opcional)</p>
      <div class="hint" style="margin-bottom:6px">
        Defina campos que aparecer√£o ao cadastrar um item desta categoria (ex.: em ‚ÄúNotebook‚Äù: CPU, RAM, SSD‚Ä¶).
      </div>
      <div id="tpl-attrs" class="stack"></div>
      <button type="button" class="btn small" id="btn-add-attr">+ Adicionar campo</button>

      <div class="divider"></div>

      <!-- NOVA SE√á√ÉO: Itens atrelados padr√£o -->
      <p class="subtitle">Itens atrelados padr√£o</p>
      <div class="hint" style="margin-bottom:6px">
        Acess√≥rios/complementos que <b>normalmente acompanham</b> itens desta categoria (ex.: PC ‚Üí monitor, mouse, teclado; Telefone ‚Üí capa, fone).
      </div>

      <div id="tpl-atrelados" class="stack"></div>
      <button type="button" class="btn small" id="btn-add-atrelado">+ Adicionar item atrelado</button>

      <div class="divider"></div>

      <div class="foot-actions" style="display:flex;justify-content:flex-end;gap:10px">
        <button type="button" class="btn">Cancelar</button>
        <button type="button" class="btn primary">Salvar (visual)</button>
      </div>
    </form>

    <div class="card">
      <p class="hint">Mock visual. Depois mapeamos as tabelas e a√ß√µes (salvar, inativar, listar).</p>
    </div>
  </div>

  <script>
    // ---------- Template de atributos ----------
    function makeAttrRow() {
      const wrap = document.createElement('div');
      wrap.className = 'grid cols-4';
      wrap.style.alignItems = 'end';
      wrap.innerHTML = `
        <div>
          <label>Nome do campo *</label>
          <input type="text" placeholder="Ex.: CPU, RAM (GB), Voltagem" />
        </div>
        <div>
          <label>Tipo *</label>
          <select>
            <option>Texto</option>
            <option>N√∫mero</option>
            <option>Lista (predef.)</option>
            <option>Data</option>
            <option>Sim/N√£o</option>
          </select>
        </div>
        <div>
          <label>Obrigat√≥rio?</label>
          <select>
            <option>N√£o</option>
            <option>Sim</option>
          </select>
        </div>
        <div class="row">
          <button type="button" class="btn small danger">Remover</button>
        </div>
        <div class="cols-span-4">
          <label>Op√ß√µes (para ‚ÄúLista‚Äù ‚Äî separadas por ;)</label>
          <input type="text" placeholder="Ex.: i3;i5;i7;i9 (apenas se tipo=Lista)" />
        </div>
      `;
      wrap.querySelector('.btn.danger').addEventListener('click', ()=> wrap.remove());
      return wrap;
    }

    const attrList = document.getElementById('tpl-attrs');
    const btnAddAttr = document.getElementById('btn-add-attr');
    btnAddAttr.addEventListener('click', () => attrList.appendChild(makeAttrRow()));
    // Come√ßa com duas linhas de exemplo
    attrList.appendChild(makeAttrRow());
    attrList.appendChild(makeAttrRow());

    // ---------- Itens atrelados padr√£o ----------
    function makeAtreladoRow() {
      const wrap = document.createElement('div');
      wrap.className = 'grid cols-4';
      wrap.style.alignItems = 'end';
      wrap.innerHTML = `
        <div>
          <label>Refer√™ncia *</label>
          <select>
            <option>Categoria (gen√©rica)</option>
            <option>Modelo espec√≠fico</option>
          </select>
        </div>
        <div>
          <label>Item *</label>
          <input type="text" placeholder="Ex.: Monitor 24\" ou 'Monitor (categoria)'" />
        </div>
        <div>
          <label>Fun√ß√£o/r√≥tulo</label>
          <input type="text" placeholder="Ex.: tela, mouse, teclado, capa, fone, fonte" />
        </div>
        <div class="row">
          <button type="button" class="btn small danger">Remover</button>
        </div>
        <div>
          <label>Quantidade padr√£o</label>
          <input type="number" min="1" value="1" />
        </div>
        <div>
          <label>Obrigat√≥rio?</label>
          <select>
            <option>N√£o</option>
            <option>Sim</option>
          </select>
        </div>
        <div>
          <label>Consum√≠vel?</label>
          <select>
            <option>N√£o</option>
            <option>Sim</option>
          </select>
        </div>
        <div>
          <label>Serial obrigat√≥rio?</label>
          <select>
            <option>N√£o</option>
            <option>Sim</option>
          </select>
        </div>
        <div class="cols-span-4">
          <label>Comportamento</label>
          <div class="row">
            <label><input type="checkbox" /> Criar automaticamente no cadastro do ativo</label>
            <label><input type="checkbox" /> Vis√≠vel no Portal QR</label>
          </div>
        </div>
      `;
      wrap.querySelector('.btn.danger').addEventListener('click', ()=> wrap.remove());
      return wrap;
    }

    const atreladosList = document.getElementById('tpl-atrelados');
    const btnAddAtrelado = document.getElementById('btn-add-atrelado');
    btnAddAtrelado.addEventListener('click', () => atreladosList.appendChild(makeAtreladoRow()));
    // Come√ßa com um exemplo
    atreladosList.appendChild(makeAtreladoRow());
  </script>
</body>
</html>
